# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Wed Sep 20 05:34:25 CDT 2017               #
###########################################################

DISTNAME=	BOLT-LMM_v${PORTVERSION}
PKGNAME=	bolt-lmm-${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	https://data.broadinstitute.org/alkesgroup/BOLT-LMM/downloads/

MAINTAINER=	bacon4000@gmail.com
HOMEPAGE=	https://data.broadinstitute.org/alkesgroup/BOLT-LMM/
COMMENT=	Statistics for testing association between phenotype and genotypes

# Check this
LICENSE=	gnu-gpl-v3

USE_LANGUAGES=	c c++ fortran
USE_TOOLS+=	gmake pax

CXXFLAGS=	-fopenmp

PORTVERSION=	2.3
DATADIR=	share/bolt-lmm
EXAMPLESDIR=	share/examples/bolt-lmm

INSTALLATION_DIRS=	bin ${DATADIR} ${EXAMPLESDIR}

post-patch:
	${RM} ${WRKSRC}/example/*.orig

pre-build:
	${CP} ${FILESDIR}/Makefile ${WRKSRC}

post-install:
	cd ${WRKSRC} && pax -rw tables ${DESTDIR}${PREFIX}/${DATADIR}
	cd ${WRKSRC}/example && pax -rw * ${DESTDIR}${PREFIX}/${EXAMPLESDIR}
	${CHMOD} a+x ${DESTDIR}${PREFIX}/${EXAMPLESDIR}/*.sh
	${CHMOD} g-w ${DESTDIR}${PREFIX}/${EXAMPLESDIR}/*

# FIXME: Use openblas when available for better performance
.include "../../math/nlopt/buildlink3.mk"
.include "../../wip/openblas/buildlink3.mk"
.include "../../math/lapack/buildlink3.mk"
.include "../../devel/boost-libs/buildlink3.mk"
.include "../../devel/zlib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
